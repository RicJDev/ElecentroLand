Procedimiento Casino(E/S: casino_nombres[i_casino], casino_contrasenas[i_casino]: Cadena, casino_edades[i_casino], casino_saldos_fichas[i_casino], casino_stock_premios[j_casino], casino_valor_premios[j_casino]: Entero, casino_premios[i_casino][j_casino]: Booleano);
Inicio
  var esta_en_registro, permitir_acceso, seguir_casino = 1: Booleano;
  var id_usuario = -1, edad: Entero;
  
  Mostrar << "Bienvenido al casino.";
  
  Repetir
    Mostrar << "Antes de continuar debe iniciar sesion. Si no esta registrado, por favor pase al modulo de registro";
    Mostrar << "Esta registrado? (1: si, 0: no)";
    Leer >> esta_en_registro;
    
    Si (esta_en_registro = 1) Entonces;
      inicio_sesion(casino_nombres[i_casino], casino_contrasenas[i_casino], casino_edades[i_casino], casino_saldos_fichas[i_casino], casino_premios[i_casino][j_casino], id_usuario, permitir_acceso);
      Mostrar << inicio_sesion;
      
      Si (permitir_acceso = 1) Entonces;
        menu_juegos(casino_nombres[i_casino], casino_saldos_fichas[i_casino], casino_premios[i_casino][j_casino], id_usuario);
        Mostrar << menu_juegos;
      Fin_Si
    Fin_Si
    
    Si (esta_en_registro = 0) Entonces;
      registro_usuario(casino_nombres[i_casino], casino_contrasenas[i_casino], casino_edades[i_casino], casino_saldos_fichas[i_casino]);
      Mostrar << registro_nuevo_usuario;
    Fin_Si
    
    Mostrar << "Desea salir del casino? (0: si, 1: no)";
    Leer >> seguir_casino;
    
    Hasta (seguir_casino = 0);
  Fin_Repetir
Fin_Procedimiento

Procedimiento inicio_sesion(E/S: casino_nombres[i_casino], casino_contrasenas[i_casino]: Cadena, casino_edades[i_casino], casino_saldos_fichas[i_casino]: Entero, casino_premios[i_casino][j_casino]: Booleano, id_usuario: Entero, S: permitir_acceso: Booleano);
Inicio
  var nombre_busqueda, contrasena_asociada, contrasena_comparacion: Cadena;
  var existe_nombre = 0: Booleano;
  var intentos = 0: Entero;
  
  Mostrar << "Ingrese su nombre";
  Leer >> nombre_busqueda;
  
  Para (i_casino = 1 Hasta i_casino = 100) Hacer;
    Si (nombre_busqueda = casino_nombres[i_casino]) Entonces;
      existe_nombre = 1;
      id_usuario = i_casino;
    Fin_Si
  Fin_Para
  
  Si (existe_nombre = 0) Entonces;
    Mostrar << "No existe el usuario que se solicito. Por favor revise o vaya al modulo de registro";
    permitir_acceso = 0;
  Fin_Si
  
  Si (existe_nombre = 1) Entonces;
    contrasena_asociada = casino_contrasenas[id_usuario];
    
    Mostrar << "Ingrese la contrasena para acceder";
    Leer >> contrasena_comparacion;
    
    Mientras (intentos < 3 AND contrasena_asociada != contrasena_comparacion) Hacer;
      Mostrar << "La contrasena ingresada es incorrecta. Intente nuevamente";
      Leer >> contrasena_comparacion;
      
      intentos = intentos + 1;
    Fin_Mientras
    
    Si (contrasena_comparacion = contrasena_asociada) Entonces;
      Mostrar << "Ya tienes acceso, papá (o mamá o unicornio volador o helicóptero apache)!";
      
      permitir_acceso = 1;
      
      Sino 
      Mostrar << "Usted ha alcanzado el limite de intentos. ";
      permitir_acceso = 0;
    Fin_Si
  Fin_Si
Fin_Procedimiento

Procedimiento registro_nuevo_usuario(E/S: casino_nombres[i_casino], casino_contrasenas[i_casino]: Cadena, casino_edades[i_casino], casino_saldos_fichas[i_casino]: Entero, casino_premios[i_casino][j_casino]: Cadena, id_usuario: Entero);
Inicio
  var nombre_registro, contrasena_registro: Cadena;
  var i_local = 1, nueva_id = -1, edad_registro: Entero;
  
  Mientras (i_local <= 100 AND nueva_id = -1) Hacer;
    Si (casino_nombres[i_local] = "no_asignado" AND casino_contrasenas = "no_asignado") Entonces;
      nueva_id = i_local;
    Fin_Si
  Fin_Mientras
  
  Si (nueva_id = -1) Entonces;
    Mostrar << "Lo siento. Hemos alcanzado la capacidad maxima de registros";
    
    Sino 
    
    Mostrar << "Ingrese nombre de usuario";
    Leer >> nombre_registro;
    
    Mientras (nombre_registro = "no_asignado") Hacer;
      Mostrar << "Nombre no valido por posible injeccion SQL";
      Leer >> nombre_registro;
    Fin_Mientras
    
    Mostrar >> "Ingrese su contrasena";
    Leer >> contrasena_registro;
    
    Mientras (contrasena_registro = "no_asignado") Hacer;
      Mostrar << "Contrasena no valida por posible injeccion SQL";
      Leer >> contrasena_registro;
    Fin_Mientras
    
    Mostrar << "Ingrese su edad";
    Leer >> edad_registro;
    
    Mientras (edad_registro < 18) Hacer;
      Mostrar << "Eeepa, menol. Tu no puedes entrar";
      Leer >> edad_registro;
    Fin_Mientras
    
    casino_nombres[nueva_id] = nombre_registro;
    casino_contrasenas[nueva_id] = contrasena_registro;
    casino_edades[nueva_id] = edad_registro;
  Fin_Si
Fin_Procedimiento
